########################################
# 매수/매도 신호 봇 — 환경설정 (.env 상단)
########################################

# --- Gatekeeper / Observe / Cooldown ---
ENABLE_OBSERVE=1
ENABLE_COOLDOWN=1
STRONG_BYPASS_SCORE=0.80
GK_TTL_HOLD_SEC=0.8
GK_DEBUG=1

# 관찰창: TF별 초(없으면 기본값 사용)
OBS_WINDOW_SEC=15m:1.5,1h:2.0,4h:2.5,1d:3.0

# 게이트키퍼 관찰시간(초) — 단일 후보만 있을 때 이 시간 경과 후 통과
GATEKEEPER_OBS_SEC=15m:20,1h:25,4h:40,1d:60
GK_DEBUG=1

# 청산 후 쿨다운: TF별 초
POST_EXIT_COOLDOWN_SEC=15m:10,1h:30,4h:60,1d:120

# 목표 점수 대기(아래 PART 2에서 설명)
WAIT_TARGET_ENABLE=1
TARGET_SCORE_BY_TF=15m:0.55,1h:0.60,4h:0.60,1d:0.70
WAIT_TARGET_SEC=15m:20,1h:30,4h:45,1d:60
TARGET_WAIT_MODE=SOFT  # SOFT|HARD

# --- Futures fees (basis points) ---
FUT_TAKER_FEE_BPS=4      # 0.04%
FUT_MAKER_FEE_BPS=2      # 0.02%
INCLUDE_FEES_IN_PNL=1    # 1이면 수수료 차감 후 PnL을 기록
ESTIMATE_FUNDING_IN_PNL=0  # (선택) 펀딩비 추정 사용 안 함

# 수수료/펀딩 추정 옵션
USE_DYNAMIC_FEE=1            # 1: CCXT 마켓 테이블 우선, 없으면 .env 값 사용
INCLUDE_FEES_IN_PNL=1        # 1: PnL에 수수료 반영
ESTIMATE_FUNDING_IN_PNL=1    # 1: PnL에 펀딩비(대략) 반영
FUT_TAKER_FEE_BPS=6          # 폴백 값(0.06%)
FUT_MAKER_FEE_BPS=2          # 폴백 값(0.02%)

##########스위치#########
# BTC,ETH중 같은 분봉에서 더 좋은 쪽 하나만 진입 (1=on 0=off)
PICK_BEST_PER_TF=1
# 우선순위 가중 (원하지 않으면 그대로 두세요)
PICK_W_SCORE=0.50   # 점수(0~100)를 0~0.5로 환산해 더함



######## 1) 실행/거래 모드 ########
AUTO_TRADE=0                         # 1=실주문, 0=시뮬
TRADE_MODE=paper                     # paper(가상) | futures(선물) | spot(현물)
EXCHANGE_ID=binanceusdm
HEDGE_MODE=1                         # 1=듀얼(롱/숏 동시), 0=단일
FUT_MARGIN=ISOLATED                  # 전역 기본 마진(오버라이드 없을 때) - ISOLATED | CROSS | CROSSED
FUT_LEVERAGE=3                       # 전역 기본 레버리지(오버라이드 없을 때)
FUT_MIN_NOTIONAL=5                   # 최소 주문 금액 (노치오날) 하한(USDT)
SLIPPAGE_PCT=0.7                     # 기본 슬리피지 허용(%)— 신호가격과 현재가 차이가 이 비율을 넘으면 진입 스킵

######## 2) 총자본 & TF별 배분 ########
TOTAL_CAPITAL_USDT=2000              # 알림/프리뷰용 참조 자본 - 실거래는 계정 잔고로 판단
ALLOC_BY_TF=15m:0.10,1h:0.15,4h:0.25,1d:0.40   #분봉 별 총자금에서의 포지션 배분비율
RESERVE_PCT=0.10                     # ALLOC 합 + RESERVE ≤ 1.0

######## 3) 강도/상위TF 가중 ########
STRENGTH_WEIGHTS=STRONG_BUY:0.80,BUY:0.55,WEAK_BUY:0.30,STRONG_SELL:0.80,SELL:0.55,WEAK_SELL:0.30
STRENGTH_BUCKETS=80:STRONG,60:BASE,0:WEAK
MTF_FACTORS=ALL_ALIGN:1.00,MAJ_ALIGN:1.25,SOME_ALIGN:1.10,NO_ALIGN:0.85,MAJ_OPPOSE:0.60,ALL_OPPOSE:0.40
FULL_ON_ALL_ALIGN=1                 # 상위TF 전부 일치 시 사용비율=100% (안정 운영 원하면 0)
DEBUG_ALLOC_LOG=0                   # (디버그) 배분 계산 로그 출력

SCALE_ENABLE=1                 # 스케일링 on/off
SCALE_MAX_LEGS=3               # 최대 증액 단계 수
SCALE_UP_SCORE_DELTA="15m:0.5,1h:0.6,4h:0.6,1d:0.7"  # 증액 임계값(점수 증가폭)
SCALE_DOWN_SCORE_DELTA="15m:0.6,1h:0.7,4h:0.8,1d:1.0" # 감액 임계값(점수 감소폭)
SCALE_STEP_PCT="15m:0.25,1h:0.25,4h:0.25,1d:0.25"     # 증액 1스텝당 TF배정금의 비율
SCALE_REDUCE_PCT="15m:0.20,1h:0.20,4h:0.20,1d:0.20"   # 감액 시 현재 수량에서 줄일 비율
SCALE_MIN_ADD_NOTIONAL_USDT=15 # 너무 작게 추가되는 거래는 무시(최소 명목가)
SCALE_LOG=1    


######## 4) 레버리지(전역/심볼×TF) ########
TF_LEVERAGE=15m:7,1h:5,4h:3,1d:3        # TF 전역 레버리지(기본): 오버라이드가 없을 때 사용
LEVERAGE_BY_SYMBOL=BTC:15m=9,1h=7,4h=5,1d=4;ETH:15m=7,1h=5,4h=4,1d=3    # 심볼×TF 오버라이드 (우선순위 최상) — 예: BTC는 더 높게, ETH는 보수적으로
BTC_LEVERAGE_BY_TF=15m:9;1h:7;4h:5;1d:4
ETH_LEVERAGE_BY_TF=15m:7;1h:5;4h:4;1d:3

######## 5) 마진 타입(전역/심볼×TF) ########
TF_MARGIN=15m:ISOLATED,1h:ISOLATED,4h:ISOLATED,1d:CROSS     # TF 전역 마진 타입: ISOLATED/CROSS/CROSSED
MARGIN_BY_SYMBOL=BTC:4h=CROSS;ETH:4h=ISOLATED               # 심볼×TF 오버라이드 (우선순위 최상) -  BTC 4h는 교차, ETH 4h는 격리
BTC_MARGIN_BY_TF=15m:CROSS;1h:CROSS;4h:CROSS;1d:CROSS
ETH_MARGIN_BY_TF=15m:ISOLATED;1h:ISOLATED;4h:ISOLATED;1d:CROSS
MARGIN_DEFAULT_BY_SYMBOL=BTC:CROSS;ETH:ISOLATED
MARGIN_DEBUG=0

######## 6) 슬리피지/TP(익절)/SL(손절)/트레일링(심볼×TF 오버라이드) — 권장(표준) ########
SLIPPAGE_BY_SYMBOL=BTC:15m=0.5,1h=0.5,4h=0.4,1d=0.4;ETH:15m=0.8,1h=0.8,4h=0.9,1d=0.9
TP_PCT_BY_SYMBOL=BTC:15m=1.0,1h=1.8,4h=2.8,1d=4.5;ETH:15m=1.2,1h=2.4,4h=3.6,1d=5.5
SL_PCT_BY_SYMBOL=BTC:15m=0.50,1h=0.90,4h=1.20,1d=2.20;ETH:15m=0.60,1h=1.10,4h=1.60,1d=3.00
TRAIL_PCT_BY_SYMBOL=BTC:15m=0.65,1h=1.10,4h=1.60,1d=2.80;ETH:15m=0.80,1h=1.40,4h=2.00,1d=3.50

######## 6-보) 전역 맵(폴백용) ########
TAKE_PROFIT_PCT=15m:1.2,1h:2.8,4h:4.0,1d:6.0
HARD_STOP_PCT=15m:0.6,1h:1.2,4h:2.5,1d:4.0
TRAILING_STOP_PCT=15m:0.8,1h:1.6,4h:2.0,1d:3.0

######## 7) 라우팅/동시 진입 정책 ########
ROUTE_BY_TF=15m:AUTO,1h:AUTO,4h:AUTO,1d:AUTO
ALLOW_BOTH_PER_TF=0                    # 같은 TF 동시 진입 금지 (1=on, 0=off)

######## 8) 디스코드 알림 채널 ########

#기본 분석 알림 채널
CHANNEL_eth_15M=789362965258043415
CHANNEL_eth_1H=1402905696348930170
CHANNEL_eth_4H=1402905732374073374
CHANNEL_eth_1D=1402905765588635658


CHANNEL_btc_15m=1406253212461305966
CHANNEL_btc_1h=1404340510675435530
CHANNEL_btc_4h=1405370951994179634
CHANNEL_btc_1d=1404340377665798235


# 공통 트레이드 알림 채널 (없으면 심볼×TF 전용을 찾음)
TRADE_CHANNEL_ID=1406462194836570182
# (선택) 심볼×TF 전용 알림 채널 — 있으면 우선 사용
TRADE_CH_ETH_15M=1406462194836570182
TRADE_CH_ETH_1H=1406462194836570182
TRADE_CH_ETH_4H=1406462194836570182
TRADE_CH_ETH_1D=1406462194836570182
TRADE_CH_BTC_15M=1406462194836570182
TRADE_CH_BTC_1H=1406462194836570182
TRADE_CH_BTC_4H=1406462194836570182
TRADE_CH_BTC_1D=1406462194836570182
# PnL 리포트 자동 전송 채널 (예: 09시/21시)
PNL_REPORT_CHANNEL_ID=1406462194836570182

########################################
# (하단) 시크릿/토큰 구역 — 별도 파일 또는 .env 하단 보관 권장
# * 절대 따옴표(") 붙이지 말고, 공백/한글/이모지 섞지 마세요 (ASCII 만!)
# BINANCE_API_KEY=
# BINANCE_SECRET=
# DISCORD_TOKEN=

########################################

